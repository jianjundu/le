<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.le.jr.am.profit.dao.HoldIncomeMapper">
	<resultMap id="BaseResultMap" type="com.le.jr.am.profit.domain.HoldIncome">
		<id column="oid" property="oid" jdbcType="VARCHAR" />
		<result column="investorOid" property="investorOid" jdbcType="VARCHAR" />
		<result column="holdOid" property="holdOid" jdbcType="VARCHAR" />
		<result column="productOid" property="productOid" jdbcType="VARCHAR" />
		<result column="incomeOid" property="incomeOid" jdbcType="VARCHAR" />
		<result column="incomeAmount" property="incomeAmount" jdbcType="DECIMAL" />
		<result column="accureVolume" property="accureVolume" jdbcType="DECIMAL" />
		<result column="confirmDate" property="confirmDate" jdbcType="DATE" />
		<result column="updateTime" property="updateTime" jdbcType="TIMESTAMP" />
		<result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
	</resultMap>
	<sql id="Base_Column_List">
		oid, investorOid, holdOid, productOid, incomeOid, incomeAmount, accureVolume, confirmDate,
		updateTime, createTime
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
		select
		<include refid="Base_Column_List" />
		from T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME
		where oid = #{oid,jdbcType=VARCHAR}
	</select>

	<insert id="insert" parameterType="com.le.jr.am.profit.domain.HoldIncome">
		insert into T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME (oid, investorOid, holdOid,
		productOid, incomeOid, incomeAmount,accureVolume, confirmDate, updateTime,createTime)
		values (#{oid,jdbcType=VARCHAR},
		#{investorOid,jdbcType=VARCHAR}, #{holdOid,jdbcType=VARCHAR},
		#{productOid,jdbcType=VARCHAR}, #{incomeOid,jdbcType=VARCHAR}, #{incomeAmount,jdbcType=DECIMAL},
		#{accureVolume,jdbcType=DECIMAL}, #{confirmDate,jdbcType=DATE},
		#{updateTime,jdbcType=TIMESTAMP},
		#{createTime,jdbcType=TIMESTAMP})
	</insert>

	<update id="updateByPrimaryKeySelective" parameterType="com.le.jr.am.profit.domain.HoldIncome">
		update T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME
		<set>
			<if test="investorOid != null">
				investorOid = #{investorOid,jdbcType=VARCHAR},
			</if>
			<if test="holdOid != null">
				holdOid = #{holdOid,jdbcType=VARCHAR},
			</if>
			<if test="productOid != null">
				productOid = #{productOid,jdbcType=VARCHAR},
			</if>
			<if test="incomeOid != null">
				incomeOid = #{incomeOid,jdbcType=VARCHAR},
			</if>
			<if test="incomeAmount != null">
				incomeAmount = #{incomeAmount,jdbcType=DECIMAL},
			</if>
			<if test="accureVolume != null">
				accureVolume = #{accureVolume,jdbcType=DECIMAL},
			</if>
			<if test="confirmDate != null">
				confirmDate = #{confirmDate,jdbcType=DATE},
			</if>
			<if test="updateTime != null">
				updateTime = #{updateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="createTime != null">
				createTime = #{createTime,jdbcType=TIMESTAMP},
			</if>
		</set>
		where oid = #{oid,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.le.jr.am.profit.domain.HoldIncome">
		update T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME
		set investorOid = #{investorOid,jdbcType=VARCHAR},
		holdOid = #{holdOid,jdbcType=VARCHAR},
		productOid = #{productOid,jdbcType=VARCHAR},
		incomeOid =
		#{incomeOid,jdbcType=VARCHAR},
		incomeAmount = #{incomeAmount,jdbcType=DECIMAL},
		accureVolume = #{accureVolume,jdbcType=DECIMAL},
		confirmDate = #{confirmDate,jdbcType=DATE},
		updateTime = #{updateTime,jdbcType=TIMESTAMP},
		createTime =
		#{createTime,jdbcType=TIMESTAMP}
		where oid = #{oid,jdbcType=VARCHAR}
	</update>



	<select id="findByInvestorOidAndConfirmDate" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME where investorOid = #{investorOid} and confirmDate = #{incomeDate}
	</select>

	<select id="findByInvestorOidAndConfirmDateInHis" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME_ where investorOid = #{investorOid} and confirmDate = #{incomeDate}
	</select>
	
	<select id="queryBackupDate" resultType="java.util.Date">
		SELECT distinct  confirmDate
		 FROM T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME 
		 WHERE confirmDate <![CDATA[ <=]]> (DATE_SUB(CURDATE(),INTERVAL 5 DAY)) ORDER BY confirmDate
	</select>


	<insert id="createHoldIncomeTable">
		CREATE TABLE T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME_ LIKE T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME
		
	</insert>
	<insert id="backupHoldIncomeData">
		INSERT INTO  T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME_  
		SELECT * FROM T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME WHERE confirmDate = #{queryDate};
	</insert>
	<delete id="deleteBackupHoldIncome">
		
		delete from T_MONEY_PUBLISHER_INVESTOR_HOLDINCOME where confirmDate = #{queryDate}
	</delete>





</mapper>